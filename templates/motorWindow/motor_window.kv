#:kivy 1.0

#: import RiseInTransition kivy.uix.screenmanager.RiseInTransition

#:set colorUVG (0,141/255,54/255,1)
#:set backgroundGeneral (204/255, 204/255, 204/255, 1)

<BoxLayoutVertical@BoxLayout>:
    orientation: "vertical"

<ServosBoxLayout@BoxLayout>:
    orientation:"horizontal"
    size_hint: [1, None]
    height: 450


<ServoBoxLayout@BoxLayout>:
    orientation: "vertical"
    size_hint:[None, 1]
    width: 450


<SeparadorVertical@Label>:
    text: ""
    size_hint: [1, None]
    height: 45


<ServoBrazo@Image>:
    pos_hint: {'center_x':0.48,'center_y': 0.17}
    size_hint:[None,None]
    size: [290,110]
    source: 'templates/motorWindow/imagenes/Servo_movil_v2.png'
    allow_stretch: True
    keep_ratio: True
    servo_angle: 0
    canvas.before: 
        PushMatrix
        Rotate:
            axis: 0,0,1
            angle: self.servo_angle
            origin: self.center
    canvas.after: 
        PopMatrix


<ServoCuerpo@Image>:
    pos_hint: {'center_x':0.535,'center_y': -0.152}
    source: 'templates/motorWindow/imagenes/Servo_cuerpo.png'
    size_hint: [None, None]
    size: [250,250]


<ServoNombre@Label>:
    color: colorUVG
    bold: True
    pos_hint: {'center_x':0.32,'center_y': 0.5}
    font_size: 25
    canvas.before: 
        PushMatrix
        Rotate:
            axis: 0,0,1
            angle: 90
            origin: self.center
    canvas.after: 
        PopMatrix


<ServoGrados@Label>:
    text: ''
    color: (125/255, 194/255, 61/255, 1)
    bold: True
    font_size: 35
    pos_hint: {'center_x':0.467,'center_y': 0.51}
    background_color: (0, 0, 0, 1) # (61/255, 61/255, 61/255, 1)
    size_hint: [None, None]
    width: 81
    height: 55
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            size: self.size
            pos: self.pos


<ServoSlider@Slider>:
    min: 0
    max: 180
    step: 1
    orientation: "horizontal"
    value_track: True
    value_track_color: colorUVG
    value_track_width: 7
    background_width: 60
    cursor_image: 'templates/motorWindow/imagenes/slider-icon.png'
    cursor_size: [40,40]


<MotorWindow>:
    on_pre_enter: root.initial_values()
    name: "motor"
    GridLayout:
        cols: 2
        #background_color: (204/255, 204/255, 204/255, 1)
        #background_color: (161/255, 161/255, 161/255, 1)
        canvas.before:
            Color:
                rgba: backgroundGeneral
            Rectangle:
                size: self.size
                pos: self.pos
        BoxLayout:
            orientation: "vertical"
            size_hint: [0.3,1]

            Label:
                text: "Motor Screen"
                font_size: 32
            
            Button:
                text: "Go Back"
                color: colorUVG
                font_sice: 32
                on_release: 
                    app.root.current = "settings"
                    root.manager.transition.direction = "left"
        

        BoxLayout:
            orientation: "vertical"

            BoxLayout:
                orientation: "horizontal"
                size_hint: [1,0.15]
                Button:
                    text: "Boton Guardar"
                    background_color: (1,0,0,1)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        Rectangle:
                            size: self.size
                            pos: self.pos
                   
                Label:
                    text: "Nombre del Gesto"
                Label:
                    text: "Seleccionar Emoji"

            
            ScrollView:
                do_scroll_y: True
                do_scroll_x: False
                size_hint_y: .8
                size_hint_x: 1

                GridLayout:
                    size_hint: [1, None]
                    height: self.minimum_height
                    cols: 1
                    rows: 14

                    SeparadorVertical:
                    ServosBoxLayout:
                        orientation: "horizontal"
                        ServoBoxLayout:
                            id_servo: 0
                            BoxLayoutVertical:
                                FloatLayout:
                                    ServoCuerpo:
                                    ServoBrazo:
                                        id: servo_movible0
                            FloatLayout:
                                ServoNombre:
                                    text: "SERVO 1"
                                ServoGrados:
                                    id: grados_servo0
                            ServoSlider:
                                id: slider_servo0
                                value: root.servos_initial_value(self.parent.id_servo)
                                on_value: root.slider_func(self.parent.id_servo, self.value)

                        Label:
                            text:""

                        ServoBoxLayout:
                            id_servo: 1
                            BoxLayoutVertical:
                                FloatLayout:
                                    ServoCuerpo:
                                    ServoBrazo:
                                        id: servo_movible1
                            FloatLayout:
                                ServoNombre:
                                    text: "SERVO 2"
                                ServoGrados:
                                    id: grados_servo1
                            ServoSlider:
                                id: slider_servo1
                                value: root.servos_initial_value(self.parent.id_servo)
                                on_value: root.slider_func(self.parent.id_servo, self.value)

                        Label:
                            text:""

                        ServoBoxLayout:
                            id_servo: 2
                            BoxLayoutVertical:
                                FloatLayout:
                                    ServoCuerpo:
                                    ServoBrazo:
                                        id: servo_movible2
                            FloatLayout:
                                ServoNombre:
                                    text: "SERVO 3"
                                ServoGrados:
                                    id: grados_servo2
                            ServoSlider:
                                id: slider_servo2
                                value: root.servos_initial_value(self.parent.id_servo)
                                on_value: root.slider_func(self.parent.id_servo, self.value)                        


                    SeparadorVertical:
                    ServosBoxLayout:
                        orientation: "horizontal"
                        ServoBoxLayout:
                            id_servo: 3
                            BoxLayoutVertical:
                                FloatLayout:
                                    ServoCuerpo:
                                    ServoBrazo:
                                        id: servo_movible3
                            FloatLayout:
                                ServoNombre:
                                    text: "SERVO 4"
                                ServoGrados:
                                    id: grados_servo3
                            ServoSlider:
                                id: slider_servo3
                                value: root.servos_initial_value(self.parent.id_servo)
                                on_value: root.slider_func(self.parent.id_servo, self.value)

                        Label:
                            text:""

                        ServoBoxLayout:
                            id_servo: 4
                            BoxLayoutVertical:
                                FloatLayout:
                                    ServoCuerpo:
                                    ServoBrazo:
                                        id: servo_movible4
                            FloatLayout:
                                ServoNombre:
                                    text: "SERVO 5"
                                ServoGrados:
                                    id: grados_servo4
                            ServoSlider:
                                id: slider_servo4
                                value: root.servos_initial_value(self.parent.id_servo)
                                on_value: root.slider_func(self.parent.id_servo, self.value)

                        Label:
                            text:""

                        ServoBoxLayout:
                            id_servo: 5
                            BoxLayoutVertical:
                                FloatLayout:
                                    ServoCuerpo:
                                    ServoBrazo:
                                        id: servo_movible5
                            FloatLayout:
                                ServoNombre:
                                    text: "SERVO 6"
                                ServoGrados:
                                    id: grados_servo5
                            ServoSlider:
                                id: slider_servo5
                                value: root.servos_initial_value(self.parent.id_servo)
                                on_value: root.slider_func(self.parent.id_servo, self.value)


                    SeparadorVertical:
                    ServosBoxLayout:
                        orientation: "horizontal"
                        ServoBoxLayout:
                            id_servo: 6
                            BoxLayoutVertical:
                                FloatLayout:
                                    ServoCuerpo:
                                    ServoBrazo:
                                        id: servo_movible6
                            FloatLayout:
                                ServoNombre:
                                    text: "SERVO 7"
                                ServoGrados:
                                    id: grados_servo6
                            ServoSlider:
                                id: slider_servo6
                                value: root.servos_initial_value(self.parent.id_servo)
                                on_value: root.slider_func(self.parent.id_servo, self.value)

                        Label:
                            text:""

                        ServoBoxLayout:
                            id_servo: 7
                            BoxLayoutVertical:
                                FloatLayout:
                                    ServoCuerpo:
                                    ServoBrazo:
                                        id: servo_movible7
                            FloatLayout:
                                ServoNombre:
                                    text: "SERVO 8"
                                ServoGrados:
                                    id: grados_servo7
                            ServoSlider:
                                id: slider_servo7
                                value: root.servos_initial_value(self.parent.id_servo)
                                on_value: root.slider_func(self.parent.id_servo, self.value)

                        Label:
                            text:""

                        ServoBoxLayout:
                            id_servo: 8
                            BoxLayoutVertical:
                                FloatLayout:
                                    ServoCuerpo:
                                    ServoBrazo:
                                        id: servo_movible8
                            FloatLayout:
                                ServoNombre:
                                    text: "SERVO 9"
                                ServoGrados:
                                    id: grados_servo8
                            ServoSlider:
                                id: slider_servo8
                                value: root.servos_initial_value(self.parent.id_servo)
                                on_value: root.slider_func(self.parent.id_servo, self.value)

                    
                    SeparadorVertical:
                    ServosBoxLayout:
                        orientation: "horizontal"
                        ServoBoxLayout:
                            id_servo: 9
                            BoxLayoutVertical:
                                FloatLayout:
                                    ServoCuerpo:
                                    ServoBrazo:
                                        id: servo_movible9
                            FloatLayout:
                                ServoNombre:
                                    text: "SERVO 10"
                                ServoGrados:
                                    id: grados_servo9
                            ServoSlider:
                                id: slider_servo9
                                value: root.servos_initial_value(self.parent.id_servo)
                                on_value: root.slider_func(self.parent.id_servo, self.value)

                        Label:
                            text:""

                        ServoBoxLayout:
                            id_servo: 10
                            BoxLayoutVertical:
                                FloatLayout:
                                    ServoCuerpo:
                                    ServoBrazo:
                                        id: servo_movible10
                            FloatLayout:
                                ServoNombre:
                                    text: "SERVO 11"
                                ServoGrados:
                                    id: grados_servo10
                            ServoSlider:
                                id: slider_servo10
                                value: root.servos_initial_value(self.parent.id_servo)
                                on_value: root.slider_func(self.parent.id_servo, self.value)

                        Label:
                            text:""

                        ServoBoxLayout:
                            id_servo: 11
                            BoxLayoutVertical:
                                FloatLayout:
                                    ServoCuerpo:
                                    ServoBrazo:
                                        id: servo_movible11
                            FloatLayout:
                                ServoNombre:
                                    text: "SERVO 12"
                                ServoGrados:
                                    id: grados_servo11
                            ServoSlider:
                                id: slider_servo11
                                value: root.servos_initial_value(self.parent.id_servo)
                                on_value: root.slider_func(self.parent.id_servo, self.value)
                    


            BoxLayout:
                orientation: "horizontal"
                size_hint: [1,0.15]
                Label:
                    text: "Flecha izquierda"

                Button:
                    background_normal: ''
                    background_down: ''
                    background_color: backgroundGeneral
                    size_hint: [None, None]
                    size: [70, 70]
                    pos_hint: {'center_x':0.5,'center_y': 0.5}
                    image_source: 'templates/motorWindow/imagenes/settings_release.png'
                    on_press: 
                        self.image_source = 'templates/motorWindow/imagenes/settings_push.png'
                    on_release: 
                        root.manager.transition = RiseInTransition()
                        root.manager.transition.duration = .05
                        self.image_source = 'templates/motorWindow/imagenes/settings_release.png'
                        app.root.current = "settings"
                    Image: 
                        source: self.parent.image_source
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                Label:
                    text: "Flecha derecha"                
