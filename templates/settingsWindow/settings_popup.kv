#:kivy 1.0
#: import Factory kivy.factory.Factory
#: import FallOutTransition kivy.uix.screenmanager.FallOutTransition

#:set colorUVG (0,141/255,54/255,1)
#:set colorUVGPress (0/255, 117/255, 45/255, 1)

<CustomSpinnerOptions@SpinnerOption>:
    background_color: (10/255, 132/255, 55/255, .8)
    font_size: 30

<SettingWindow>:
    auto_dismiss: False
    size_hint: [.7, .7]
    title: "Configuración"
    BoxLayout:
        orientation:"vertical"
        background_color: (204/255, 204/255, 204/255, 1)
        canvas.before:
            Color:
                rgba: self.background_color
            Rectangle:
                size: self.size
                pos: self.pos
        BoxLayout:
            orientation: "horizontal"
            Image:
                source: 'templates/settingsWindow/imagenes/Logo-UVG-03.png'
                allow_stretch: True
                keep_ratio: False
            Label:
                text: ""     
            Label:
                id: click_label
                text: "Pantalla de configuración"
                font_size: 54
                color: colorUVG
                bold: True
            Label:
                text: ""
            AnchorLayout:
                anchor_x: 'right'
                anchor_y: 'top'
                Button:
                    id: exit_settings
                    background_normal: ''
                    background_down: ''
                    background_color: (.96, .23, .23, 1)
                    text: "X"
                    font_size: 40
                    size_hint:[None,None]
                    size: [70,35]
                    on_press: self.background_color = (.84, .02, .02, 1)
                    on_release: 
                        self.background_color = (1, 0, 0, 1)
                        root.dismiss()
        BoxLayout:
            orientation:"horizontal"
            Label:
                text:''
                size_hint: [None, 1]
                width: 200
            Label:
                pos_hint: {'center_x':0.5, 'center_y':0.5}
                size_hint: None, None
                size: [500, 50]
                text: "     Ingrese el port para \nconectarse con el Rostro"
                font_size: 45
                color: colorUVG
            Label:
                text:''
                size_hint: [None, 1]
                width: 200
            FloatLayout:
                TextInput:
                    id: serial_com
                    input_filter: "int"
                    pos_hint: {'center_x':0.1, 'center_y': 0.5}
                    size_hint: [None, None]
                    size: [95, 70]
                    font_size: 30
                    background_normal: "templates/dataSettingWindow/imagenes/text_input_mini.png"
                    background_active: "templates/dataSettingWindow/imagenes/text_input_mini.png"
                    foreground_color: (1, 1, 1, 1)
                    padding_x: [35,0]
                    padding_y: [17,0]
            Label:
                text:''
                size_hint: [None, 1]
                width: 75
            FloatLayout:
                Button:
                    id: "buscar_port"
                    background_normal: ''
                    background_down: ''
                    background_color: (0, 0, 0, 0)
                    color_background: (0,141/255,54/255,1)
                    color: (1, 1, 1, 1)
                    text: "Conectar"
                    font_size: 40
                    size_hint: [None, None]
                    size: [200, 50]
                    pos_hint: {'center_x':0.5, 'center_y':0.5}
                    canvas.before:
                        Color:
                            rgba: self.color_background
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                            radius: [25]
                    on_press: 
                        self.color_background = colorUVGPress
                    on_release: 
                        root.conectar_com()
                        self.color_background = colorUVG

            Label:
                text:''
                size_hint: [None, 1]
                width: 200
        Label:
            text: '' 
            size_hint: [1, None]
            height: 40
        Spinner:
            id: spinner_id
            background_normal: ''
            background_down: ''
            background_color: colorUVG
            pos_hint: {'center_x':0.5}
            size_hint: [0.6, None]
            height: 70
            text: "Seleccione su cámara"
            font_size: 45
            values: root.values_array()
            on_text: root.spinner_clicked(spinner_id.text)
            option_cls: Factory.get("CustomSpinnerOptions")
        Label:
            text: ''
            size_hint: [1, None]
            height: 40
        Button:
            pos_hint: {'center_x':0.5, 'center_y':0.5}
            text: "Cerrar App"
            background_normal: ''
            background_down: ''
            background_color: (.96, .23, .23, 1)
            font_size: 40
            size_hint: [None, None]
            size: [200, 50]
            on_press: self.background_color = (.84, .02, .02, 1)
            on_release: 
                self.background_color = (1, 0, 0, 1)
                root.cerrar_app()
        FloatLayout:
            Label:
                id: exito_conexion
                text: ""
                font_size: 28
                bold: True
                color: (0, 1, 0, 1)
                outline_color: (0, 0, 0)
                outline_width: 1
                size_hint: [1, None]
                height: 100
                pos: [720, 480]
